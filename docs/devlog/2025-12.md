# Devlog — 2025.12

## Overview

This document summarizes the major development progress and decisions made for **TimeBoxPlanner** in December 2025.

The focus of this period was stabilizing the timeline UX, refining interaction patterns, and refactoring the Home feature structure for maintainability.

---

## Key Goals

- Improve timeline interaction UX
- Resolve conflicts between grid-based and list-based UI
- Clarify responsibilities of Home-related files
- Prepare the project structure for long-term development

---

## Major Changes

### 1. Timeline Interaction Refinement

- Introduced a grid-based timeline where block height represents time duration
- Added drag handles to adjust time ranges directly
- Unified interactions:
  - Single tap → edit bottom sheet
  - Double tap → toggle completion
- Removed legacy swipe-based list interactions to prevent gesture conflicts

**Reason**  
Mixing grid and list/swipe interactions caused UX inconsistency and visual instability.

**Result**  
A clearer and more predictable interaction model similar to calendar-based tools.

---

### 2. Home Feature Refactoring

Home-related files were refactored to clearly separate responsibilities.

| File | Responsibility |
|----|---------------|
| HomeScreen.kt | Host, routing, top-level UI |
| HomeViewModel.kt | State management and business logic |
| HomeStep1.kt | Todo input and dialogs |
| HomeStep2.kt | Big3 selection |
| HomeStep3.kt | Timeline placement |
| HomeTimeline.kt | Shared timeline UI and bottom sheets |

**Result**  
Improved readability, easier maintenance, and reduced coupling between UI and logic.

---

### 3. UX Improvements

- Added quick edit flows via modal bottom sheets
- Improved visual feedback for completed tasks
- Introduced the concept of “Unscheduled Todos” for future enhancements

---

## Remaining Tasks

- Display timeline hours in 1–24 format with AM/PM visual divider
- Improve edit bottom sheet UX
- Finalize bidirectional completion toggle behavior
- General performance and UX polish

---
## Related ADRs

- ADR 001 — Grid-based timeline UI  
  `../adr/001-grid-based-timeline-ui.md`

- ADR 002 — Guest mode & account data sync strategy  
  `../adr/002-guest-login-sync-strategy.md`

- ADR 003 — Timeline gesture interaction model  
  `../adr/003-timeline-gesture-model.md`

---


### 4. Double-tap Completion Latency Fix

While refining the timeline interaction model, a UX issue was identified where
double-tap completion toggles (done / undone) felt delayed or unreliable.

**Problem**  
The default `detectTapGestures(onTap + onDoubleTap)` API introduces an inherent
delay while determining whether a tap sequence is single or double, which caused
completion state changes to feel unresponsive in a frequently used interaction.

**Solution**  
- Replaced `detectTapGestures` with a custom `pointerInput`-based gesture handler
- Explicitly controlled double-tap detection using `awaitEachGesture` and timeout logic
- Triggered completion toggle immediately on the second tap event

**Result**  
- Completion and undo actions now respond instantly
- The interaction feels reliable and intentional
- Improved user trust in timeline gesture interactions

---

## Notes

This month focused on **structure and UX stability** rather than adding new features.

Future development will build on this foundation to expand functionality while maintaining clarity and consistency.

